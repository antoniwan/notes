---
export interface Translation {
  id: string;
  title: string;
  language: string[];
  path: string;
}

export interface Props {
  translations: Translation[];
  currentPath: string;
  currentLanguage?: string;
}

const { translations, currentPath } = Astro.props;

// Filter out current post and sort by language
const otherTranslations = translations
  .filter((t) => t.path !== currentPath)
  .sort((a, b) => {
    // Sort English first, then alphabetically
    if (a.language[0] === 'en') return -1;
    if (b.language[0] === 'en') return 1;
    return a.language[0].localeCompare(b.language[0]);
  });

// Language display names
const languageNames: Record<string, string> = {
  en: 'English',
  es: 'Espa√±ol',
};

// Language flags
const languageFlags: Record<string, string> = {
  en: 'üá∫üá∏',
  es: 'üáµüá∑',
};
---

{
  otherTranslations.length > 0 && (
    <div class="language-toggle">
      <span class="language-label">Also available in:</span>
      {otherTranslations.map((translation) => (
        <a
          href={translation.path}
          class="language-link"
          title={`Read in ${languageNames[translation.language[0]]}`}
        >
          {languageFlags[translation.language[0]]} {languageNames[translation.language[0]]}
        </a>
      ))}
    </div>
  )
}

<style>
  .language-toggle {
    @apply mb-8 flex items-center gap-3 text-sm text-[rgb(var(--color-text-muted))];
  }

  .language-label {
    @apply font-medium;
  }

  .language-link {
    @apply font-medium text-[rgb(var(--color-accent))] no-underline transition-colors duration-200 hover:text-[rgb(var(--color-accent-hover))];
  }

  .language-link:hover {
    @apply underline;
  }
</style>
